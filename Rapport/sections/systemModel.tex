\section{System Model}
\label{sec:systemModel}
The PBFT consensus algorithm is implemented using \emph{R} number of servers referred to as \emph{replicas}. When a replica is down or behaving maliciously then we say that the replica is faulty. The number of faulty replicas is symbolized as \emph{f}.
Quorum is a term used to refer to the limit of messages required to verify that the majority of replicas in the system agreed upon a decision\cites[p.~408-409]{PAPER:PBFTRecovery}. %Add another more detailed cite here!
A single replica is chosen as the leader called primary, and is represented as \emph{p}. The other replicas are referred to as backups. The responsibility of the primary is to order the request sent to the system by numerous clients~\cites[p.~456]{BOOK:MVstandver3}[p.~405]{PAPER:PBFTRecovery}. The replica that is chosen as the primary is based on the replica's identifier value~\cite[p.~258]{BOOK:BuildDepDistSyst}.

According to~\cites[p.~3]{PAPER:OGPBFT}[p.~405]{PAPER:PBFTRecovery}, replicas in the distributed network move through "successions of configurations known as views". A simpler definition for a view is the number that defines the set of non-faulty replicas which are participating in the current PBFT protocol round set up by the current primary. The current view number is symbolized by the letter \emph{v}.
As mentioned previously, the primary is chosen based on an identifier value \emph{i}. That identifier value is determined by the formula $p = v ~mod~ R$~\cites[p.~258]{BOOK:BuildDepDistSyst}[p.~3]{PAPER:OGPBFT}{SLIDES:PBFT}.
We decided to set the initial view number to zero, which results in the formula setting replica zero as the initial primary.

The protocol can only guarantee the safety and liveness properties of a system if the number of faulty replicas does not exceed a specified margin of the total replicas in the network. The total number of replicas required to be in the system should be derived by the formula $R > 3f + 1$.
The formula shows that for each new faulty replica that is to be handled in the network, three additional replicas are required. As an example, the lowest number of replicas a system can have is four. In this situation the system can only handle up to one faulty replica. In order to handle more faulty replicas the system has to scale up by adding three additional servers for each faulty server that exist in the system~\cites[p.~257]{BOOK:BuildDepDistSyst}[p.~403]{PAPER:PBFTRecovery}{SLIDES:PBFT}[p.~3]{PAPER:OGPBFT}.

All the messages sent between replicas are expected to be digitally signed by their sender. The signature process uses public-key cryptography~\cite[p.~257,p.267]{BOOK:BuildDepDistSyst}. A hidden private key is used to sign the messages while the other parties can use the replica's public key to verify this signature~\cite[p.~417]{PAPER:PBFTRecovery}. The signature procedure is used to verify that the sender is who they claim to be~\cite[p.~3]{PAPER:OGPBFT}. In some cases, the digital signatures are replaced with a Message Authentication Code (MAC). This is done for removing potential bottlenecks in performance as well as to detect tampering in messages\cites[p.~257]{BOOK:BuildDepDistSyst}[p.~3,8]{PAPER:OGPBFT}. In this PBFT implementation, digital signatures are used for all message types.


%According to~\cite{PAPER:OGPBFT,PAPER:PBFTRecovery} page 3 and 8 respectively, replicas move through "successions of configurations known as views". A simpler definition for a view is a number that defines the set of non-faulty replicas that are participating in the current PBFT protocol round set up by the current primary. , where p refers to the primary, v is the current view number and |R| is the number of replicas.